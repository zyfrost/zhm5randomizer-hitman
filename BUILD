# Bazel rules for ZHM5Randomizer for Hitman.

load("@rules_cc//cc:defs.bzl", "cc_binary")

cc_binary(
    name = "DINPUT8.dll",
    srcs = [
        "src/ClientValidation.cpp",
        "src/ClientValidation.h",
        "src/Config.cpp",
        "src/Config.h",
        "src/Console.cpp",
        "src/Console.h",
        "src/DefaultItemPool.cpp",
        "src/DefaultItemPool.h",
        "src/DefaultItemPoolRepository.cpp",
        "src/DefaultItemPoolRepository.h",
        "src/dllmain.cpp",
        "src/Hash.cpp",
        "src/Hash.h",
        "src/Item.cpp",
        "src/Item.h",
        "src/MemoryUtils.cpp",
        "src/MemoryUtils.h",
        "src/Offsets.cpp",
        "src/Offsets.h",
        "src/Pe.cpp",
        "src/Pe.h",
        "src/Process.cpp",
        "src/Process.h",
        "src/RandomizationMan.cpp",
        "src/RandomizationMan.h",
        "src/randomizers/Custom.h",
        "src/randomizers/hero/Default.cpp",
        "src/randomizers/hero/Default.h",
        "src/randomizers/Identity.cpp",
        "src/randomizers/Identity.h",
        "src/randomizers/npc/ChainReaction.cpp",
        "src/randomizers/npc/ChainReaction.h",
        "src/randomizers/npc/Custom.cpp",
        "src/randomizers/npc/Custom.h",
        "src/randomizers/npc/Default.cpp",
        "src/randomizers/npc/Default.h",
        "src/randomizers/npc/Hard.cpp",
        "src/randomizers/npc/Hard.h",
        "src/randomizers/npc/Sleepy.cpp",
        "src/randomizers/npc/Sleepy.h",
        "src/randomizers/npc/Unlimited.cpp",
        "src/randomizers/npc/Unlimited.h",
        "src/randomizers/Randomizer.cpp",
        "src/randomizers/Randomizer.h",
        "src/randomizers/stash/Default.cpp",
        "src/randomizers/stash/Default.h",
        "src/randomizers/world/Action.cpp",
        "src/randomizers/world/Action.h",
        "src/randomizers/world/AllExplosives.cpp",
        "src/randomizers/world/AllExplosives.h",
        "src/randomizers/world/Custom.cpp",
        "src/randomizers/world/Custom.h",
        "src/randomizers/world/Debug.cpp",
        "src/randomizers/world/Debug.h",
        "src/randomizers/world/Default.cpp",
        "src/randomizers/world/Default.h",
        "src/randomizers/world/Identity.cpp",
        "src/randomizers/world/Identity.h",
        "src/randomizers/world/NoItems.cpp",
        "src/randomizers/world/NoItems.h",
        "src/randomizers/world/Roulette.cpp",
        "src/randomizers/world/Roulette.h",
        "src/randomizers/world/TreasureHunt.cpp",
        "src/randomizers/world/TreasureHunt.h",
        "src/Repository.cpp",
        "src/Repository.h",
        "src/RepositoryID.cpp",
        "src/RepositoryID.h",
        "src/RNG.cpp",
        "src/RNG.h",
        "src/Scenario.cpp",
        "src/Scenario.h",
        "src/SceneLoadObserver.cpp",
        "src/SceneLoadObserver.h",
        "src/Signatures.cpp",
        "src/Signatures.h",
        "src/SigScanner.cpp",
        "src/SigScanner.h",
        "src/SSceneInitParameters.cpp",
        "src/SSceneInitParameters.h",
        "src/TArray.h",
        "src/Version.cpp",
        "src/Version.h",
        "src/ZString.h",
        "thirdparty/json.hpp",
    ],
    copts = [
        "/std:c++latest",
        "/DCOMPILING_DLL",
        "-Ithird_party",
    ],
    linkopts = [
        "-DEFAULTLIB:user32",
        "-DEFAULTLIB:kernel32",
        "-DEFAULTLIB:user32",
        "-DEFAULTLIB:gdi32",
        "-DEFAULTLIB:winspool",
        "-DEFAULTLIB:shell32",
        "-DEFAULTLIB:ole32",
        "-DEFAULTLIB:oleaut32",
        "-DEFAULTLIB:uuid",
        "-DEFAULTLIB:comdlg32",
        "-DEFAULTLIB:advapi32",
        "-DEFAULTLIB:crypt32",
        "-DEFAULTLIB:wintrust",
    ],
    linkshared = 1,
    # include_prefix = "ZHM5Randomizer",
    deps = [
        "@tomlpp",
        "@com_google_absl//absl/memory",
        "@spdlog",
    ],
)
